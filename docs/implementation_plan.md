# Архитектура и структура проекта (Клон Santehnika-Online)

Этот документ содержит результаты аудита сайта santehnika-online.ru и технический план (включающий структуру страниц, БД и компонентов) для создания его точного клона на базе Next.js 15, Payload CMS 3.0 и Tailwind CSS / shadcn/ui.

## 1. Дизайн-система (UI/UX)

На основе визуального аудита и рекомендаций агента `ui-ux-pro-max`, сформированы следующие стилистические токены и правила для Tailwind CSS:

*   **Цветовая палитра:**
    *   `primary`: `#3D78E3` (Глубокий синий) — главные кнопки каталога, добавления в корзину, активные иконки.
    *   `secondary`: `#F5F7FA` (Светло-голубой/серый) — фон карточек преимуществ, подложки секций.
    *   `background`: `#FFFFFF` (Белый) — фон основного контента.
    *   `text`: `#1E293B` (Темно-серый/сланец) — основной контрастный текст для читаемости (WCAG >= 4.5:1).
    *   `muted`: `#475569` — второстепенный серый текст (старые цены, мелкие характеристики).
    *   `accent` (Скидки/Акции): Розовый/Красный `#EF4444` (баджи скидок), Желтый `#EAB308` (звезды рейтинга).
*   **Типографика:**
    *   Шрифты: `Rubik` (для массивных, акцентных заголовков) и `Nunito Sans` или `Inter` (для основного текста и интерфейса).
*   **Стиль компонентов (shadcn/ui):**
    *   Кнопки (`Button`): Скругленные углы (`var(--radius) = 0.5rem / 8px`), плавный `hover`.
    *   Карточки (`Card`): Плоский дизайн, легкая граница (`border-border`), без тяжелых теней по умолчанию. Легкая тень появляется при наведении (`hover:shadow-md transition-shadow duration-200`).
*   **Сетка и Лейаут:**
    *   Центрированный контейнер максимальной ширины (например, `max-w-7xl`).
    *   Воздушные отступы между крупными секциями (48px - 64px) для облегчения восприятия.

## 2. Структура маршрутов (Next.js App Router)

*   `/` — **Главная страница** (Hero-слайдер, "Горячие предложения", Сетка популярных категорий, Блок услуг).
*   `/catalog` — **Корень каталога** (Содержит дерево всех категорий).
*   `/catalog/[slug]` — **Страница категории / Листинг товаров** (Слева — Sidebar с фильтрами: цена, бренд, коллекции, наличие; Справа — Сетка `ProductCard`, сверху — сортировка).
*   `/product/[slug]` — **Карточка товара** (Включает фотогалерею, блок покупки с ценой, табы с описанием "О товаре", "Связанные аксессуары", "Отзывы").
*   `/cart` — **Корзина**.
*   `/checkout` — **Оформление заказа** (Интеграция со Stripe из стандартного плагина Payload).

## 3. Схема данных (Payload CMS 3.0)

В папке `src/collections` необходимо обновить или создать следующие коллекции:

*   **Products (Товары):**
    *   Поля: Название, Slug, Изображения (Media), Цена, Старая цена (опционально для скидки), Рейтинг (число + кол-во отзывов), Артикул, Наличие (В наличии / Под заказ).
    *   Связи: Relationship к `Categories`.
    *   Массивы/Блоки: Характеристики (Key-Value: Бренд, Цвет, Материал, Стиль).
*   **Categories (Категории):**
    *   Поля: Название, Slug, Иконка/Изображение для каталога.
    *   Связи: Родительская категория (Self-referencing relationship для построения дерева подкатегорий).
*   **Pages (Страницы):**
    *   Использование встроенного Layout Builder (`src/blocks`) для сборки динамических страниц (Главная).
    *   Блоки для главной: `HeroSliderBlock`, `CategoriesGridBlock`, `ProductCarouselBlock` (Товары дня), `ServicesBlock`.

А также настройки в `src/globals`:
*   **Header:** Массив ссылок, контактные телефоны, выделение кнопки "Каталог" (вызов Mega-Menu с категориями).
*   **Footer:** Ссылки по разделам, копирайт.

## 4. Компоненты UI (src/components)

Основные переиспользуемые элементы, которые потребуется сверстать:

*   **`ProductCard`** (карточка товара в сетке): Изображение по центру, бейдж скидки (%) поверх фото, название (line-clamp-2), блок цены (крупная текущая и мелкая зачеркнутая), иконка рейтинга и синяя кнопка "В корзину".
*   **`CategoryCard`** (плитка категории): Квадратная/прямоугольная панель с иконкой и названием по центру, с легким фоном.
*   **`ProductGallery`** (на странице товара): Крупное главное изображение с поддержкой зума + ряд миниатюр снизу/сбоку.
*   **`FiltersSidebar`** (сайдбар каталога): Аккордеоны с чекбоксами для фильтрации с поддержкой обновления списка товаров (`useRouter/useSearchParams`). 

## План тестирования и верификации (Verification Plan)

1.  **Ручное тестирование UI:** 
    *   Запуск Next.js клиента (\`pnpm dev\`).
    *   Проверка соответствия цветовых токенов в `globals.css` и `tailwind.config.ts`.
    *   Проверка отображения новой `ProductCard` на разных устройствах (Mobile-first, сетка в 1 колонку на мобильных и 3-4 на десктопе).
2.  **Тестирование Payload:**
    *   Создание тестовой иерархии категорий (САНТЕХНИКА -> Унитазы).
    *   Создание тестового товара, привязка к категории и проверка отображения характеристик и цен по API GraphQL/REST.
3.  **Автоматизированные тесты (Playwright):**
    *   Настроить E2E тест базового сценария: Открытие главной -> Переход в /catalog -> Клик по фильтру -> Добавление тестового товара в корзину.
